<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jarvis.gmall.mapper.OrderMapper">

    <insert id="insert_order" parameterType="com.jarvis.gmall.entity.T_MALL_ORDER" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
        INSERT INTO t_mall_order ( shhr, zje, jdh, yh_id, dzh_id, dzh_mch )
        VALUES
            (#{shhr},#{zje},#{jdh},#{yh_id},#{dzh_id},#{dzh_mch})
    </insert>
    
    <insert id="insert_flow" parameterType="com.jarvis.gmall.entity.T_MALL_FLOW" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
        INSERT INTO t_mall_flow (
            psfsh,
            yh_id,
            dd_id,
            mqdd,
            mdd)
        VALUES
            (#{psfsh},#{yh_id},#{dd_id},#{mqdd},#{mdd})
    </insert>

    <insert id="insert_infos" parameterType="Map">
        INSERT INTO t_mall_order_info ( dd_id, sku_id, sku_mch, shp_tp, sku_jg, sku_shl, sku_kcdz, flow_id, gwch_id )
        VALUES
            <foreach collection="list_info" item="info" separator=",">
                (#{dd_id},#{info.sku_id},#{info.sku_mch},#{info.shp_tp},#{info.sku_jg},#{info.sku_shl},#{info.sku_kcdz},#{flow_id},#{info.gwch_id})
            </foreach>

    </insert>

    <delete id="delete_carts" parameterType="List">
        DELETE
        FROM
            t_mall_shoppingcar
        WHERE
            id IN
            <foreach collection="list_cart_id" item="cart_id" separator="," open="(" close=")">
                ${cart_id}
            </foreach>
    </delete>

</mapper>